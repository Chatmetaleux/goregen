!function(e,t){function n(e){var t="";if(!(e=parseInt(e,10))||e<1)return t;for(;e;)t+="0",e-=1;return t}function r(e,t,r){return null==e&&(e=""),e=""+e,(r?e:"")+n(t-e.length)+(r?"":e)}function i(e,t){var n,r=0,i=e.length;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r<i;){if(t(e[r]))return e[r];r+=1}}function o(e,t){var n=0,r=e.length;if(e&&r)for(;n<r;){if(!1===t(e[n],n))return;n+=1}}function u(e,t){var n=0,r=e.length,i=[];if(!e||!r)return i;for(;n<r;)i[n]=t(e[n],n),n+=1;return i}function s(e,t){return u(e,function(e){return e[t]})}function a(e){var t=[];return o(e,function(e){i(t,e)||t.push(e)}),t}function c(e,t){var n=[];return o(e,function(r,i){if(!t(r))return n=e.slice(i),!1}),n}function f(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var l;if("function"==typeof require)try{l=require("moment")}catch(e){}if(!l&&e.moment&&(l=e.moment),!l)throw"Moment Duration Format cannot find Moment.js";l.duration.fn.format=function(){var e,t,p,h,m,y,d=[].slice.call(arguments),g=f({},this.format.defaults),v=l.duration(this);return g.duration=this,o(d,function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)&&f(g,e):g.precision=e:g.template=e}),p=g.types=function(e){return"[object Array]"===Object.prototype.toString.call(e)}(g.types)?g.types:g.types.split(" "),"function"==typeof g.template&&(g.template=g.template.apply(g)),e=new RegExp(u(p,function(e){return g[e].source}).join("|"),"g"),h=function(e){return i(p,function(t){return g[t].test(e)})},t=u(g.template.match(e),function(e,t){var n=h(e);return{index:t,length:e.length,token:"escape"===n?e.replace(g.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}}),(m=function(e,t){var n=[];return o(e,function(e){o(t,function(t){e===t&&n.push(e)})}),a(n)}(p,a(function(e){var t=[];return o(e,function(e){e&&t.push(e)}),t}(s(t,"type"))))).length?(o(m,function(e,n){var r,i,u,s,a;r=v.as(e),i=r>0?Math.floor(r):Math.ceil(r),u=r-i,s=n+1===m.length,a=!n,o(t,function(t){t.type===e&&(f(t,{value:r,wholeValue:i,decimalValue:u,isLeast:s,isMost:a}),a&&null==g.forceLength&&t.length>1&&(g.forceLength=!0))}),v.subtract(i,e)}),g.trim&&(t=("left"===g.trim?c:function(e,t){return c(e.slice().reverse(),t).reverse()})(t,function(e){return!(e.isLeast||null!=e.type&&e.wholeValue)})),y=!1,"right"===g.trim&&t.reverse(),t=u(t,function(e){var t,i;if(!e.type)return e.token;if(t=e.isLeast&&g.precision<0?(Math.floor(e.wholeValue*Math.pow(10,g.precision))*Math.pow(10,-g.precision)).toString():e.wholeValue.toString(),t=t.replace(/^\-/,""),e.length>1&&(y||e.isMost||g.forceLength)&&(t=r(t,e.length)),e.isLeast&&g.precision>0)switch((i=e.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/)).length){case 1:t+="."+r(i[0],g.precision,!0).slice(0,g.precision);break;case 2:t+="."+r(i[1],g.precision,!0).slice(0,g.precision);break;case 3:t+="."+r(n(+i[2]-1)+(i[0]||"0")+i[1],g.precision,!0).slice(0,g.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return e.isMost&&e.value<0&&(t="-"+t),y=!0,t}),"right"===g.trim&&t.reverse(),t.join("")):s(t,"token").join("")},l.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var e=this.types,t=this.duration;switch(function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(e,function(e){return t._data[e]})){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}(this);
